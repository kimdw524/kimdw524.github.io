{"componentChunkName":"component---src-templates-post-tsx","path":"/post/click-recalculate-style/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"버튼을 클릭하면 즉시 recalculate style이 발생한다.","slug":"click-recalculate-style","tags":["Browser"],"date":"2024-12-30 02:41:00"},"html":"<p>의도적으로 클릭 관련 스타일을 모두 없애도, 버튼을 클릭하는 순간 <code class=\"language-text\">Recalculate style</code>이 발생한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n      <span class=\"token keyword\">function</span> <span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        performance<span class=\"token punctuation\">.</span><span class=\"token function\">mark</span><span class=\"token punctuation\">(</span><span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          performance<span class=\"token punctuation\">.</span><span class=\"token function\">mark</span><span class=\"token punctuation\">(</span><span class=\"token string\">'2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          performance<span class=\"token punctuation\">.</span><span class=\"token function\">mark</span><span class=\"token punctuation\">(</span><span class=\"token string\">'3'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          performance<span class=\"token punctuation\">.</span><span class=\"token function\">mark</span><span class=\"token punctuation\">(</span><span class=\"token string\">'4'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token special-attr\"><span class=\"token attr-name\">onclick</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span><span class=\"token value javascript language-javascript\"><span class=\"token function\">test</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span>Test<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>위와 같은 코드를 작성하고 버튼을 클릭하고 Performance 탭을 보면 결과는 아래와 같다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 572px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bf4c0a600eed6531bc6bf25d6e62e82a/a805e/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.73006134969326%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABfklEQVR42qWUy3KbQBBF+f9/8i6xNylXtJBdtiwLxEvAMDwkBAODTxqySGXJeNEbhrrVp+/t9vr2iE6fiBJFXhSMk8XOX87l9cOVW/6AH4QcP0+Uuka+i/DMZL82l2csmOsrKt2RZhWqLBnMiLwxifLW8salm+6Nptihm4G6aTCjXbt0EhQypts7Vf6bujU0bUs/GEYRneTRSqtbyjOLYPdCHj4SJpo0vZDliktW0PXDZnSv63s69ZMofOfTj8SUasV1Rh4Fr44f8c8RJ98Xt89ocXr9wTog39RMdKgI4oBMMOumdersH7L2yYIdH6eYUiKz5LCsanfBJdh3/UQcHiXYZ4pCSWwm902RMWFvb1TZM1UjsRHkRfDvDB02pRGRMIwkJtEaaDF3sxH/mZKUFa+CqpRmtHZ19lumxPrC/nSQGSbrhiwjWNt3FWybA3nygyDMJTbZum7z7I7tDWZiqH+RRHsJd0qhSozcROcO5Xox9R9c9Z77AF13/9aR/QOK3H4a6GL1owAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"performance\"\n        title=\"\"\n        src=\"/static/bf4c0a600eed6531bc6bf25d6e62e82a/a805e/1.png\"\n        srcset=\"/static/bf4c0a600eed6531bc6bf25d6e62e82a/222b7/1.png 163w,\n/static/bf4c0a600eed6531bc6bf25d6e62e82a/ff46a/1.png 325w,\n/static/bf4c0a600eed6531bc6bf25d6e62e82a/a805e/1.png 572w\"\n        sizes=\"(max-width: 572px) 100vw, 572px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>버튼을 클릭하면 <code class=\"language-text\">Recalculate style</code>이 발생하는 걸 볼 수 있다.</p>\n<p>발생 시점이 특이한데 Promise 이후, <strong>requestAnimationFrame 이전</strong>이다.</p>"},"prev":{"frontmatter":{"slug":"npm-publish","title":"npm 라이브러리 개발부터 배포까지"}},"next":null},"pageContext":{"id":"3f5d63bc-a1a4-5733-9f9d-f642c2b9dc14","prev":"9d6cadcd-fa33-5892-9109-deeb1114c99f","next":""}},"staticQueryHashes":["1218423607"],"slicesMap":{}}